From e0a81d6cc95285d03c3ad188995defe3a7bb83b9 Mon Sep 17 00:00:00 2001
From: Zainab Amir <zainab.amir@arbisoft.com>
Date: Fri, 17 Sep 2021 11:19:25 +0500
Subject: [PATCH 0652/1021] feat: add learner type to course homepage (#643)

---
 src/course-home/outline-tab/OutlineTab.jsx | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/src/course-home/outline-tab/OutlineTab.jsx b/src/course-home/outline-tab/OutlineTab.jsx
index 1d70631..0b47b55 100644
--- a/src/course-home/outline-tab/OutlineTab.jsx
+++ b/src/course-home/outline-tab/OutlineTab.jsx
@@ -1,6 +1,7 @@
 import React, { useState } from 'react';
 import { useSelector } from 'react-redux';
 import { sendTrackEvent, sendTrackingLogEvent } from '@edx/frontend-platform/analytics';
+import { getAuthenticatedUser } from '@edx/frontend-platform/auth';
 import { injectIntl, intlShape } from '@edx/frontend-platform/i18n';
 
 import { Button, Toast } from '@edx/paragon';
@@ -105,9 +106,19 @@ function OutlineTab({ intl }) {
     });
   };
 
+  const isEnterpriseUser = () => {
+    const authenticatedUser = getAuthenticatedUser();
+    const userRoleNames = authenticatedUser ? authenticatedUser.roles.map(role => role.split(':')[0]) : [];
+
+    return userRoleNames.includes('enterprise_learner');
+  };
+
   /** [[MM-P2P] Experiment */
   const MMP2P = initHomeMMP2P(courseId);
 
+  /** show post enrolment survey to only B2C learners */
+  const learnerType = isEnterpriseUser() ? 'enterprise_learner' : 'b2c_learner';
+
   return (
     <>
       <Toast
@@ -117,7 +128,7 @@ function OutlineTab({ intl }) {
       >
         {goalToastHeader}
       </Toast>
-      <div className="row w-100 mx-0 my-3 justify-content-between">
+      <div data-learner-type={learnerType} className="row w-100 mx-0 my-3 justify-content-between">
         <div className="col-12 col-sm-auto p-0">
           <div role="heading" aria-level="1" className="h2">{title}</div>
         </div>
-- 
2.34.1

