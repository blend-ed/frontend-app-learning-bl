From 9f81897fd2fb7ddc6653ba9b926d3e0cbe033d8a Mon Sep 17 00:00:00 2001
From: Viktor Rusakov <52399399+ViktorRusakov@users.noreply.github.com>
Date: Thu, 15 Jul 2021 22:10:17 +0300
Subject: [PATCH 0541/1021] feat: update onboarding link on the course home
 page (#542)

---
 src/course-home/data/api.js                                 | 2 +-
 src/course-home/outline-tab/OutlineTab.test.jsx             | 2 +-
 src/course-home/outline-tab/widgets/ProctoringInfoPanel.jsx | 3 +--
 3 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/src/course-home/data/api.js b/src/course-home/data/api.js
index 8816ace..128a859 100644
--- a/src/course-home/data/api.js
+++ b/src/course-home/data/api.js
@@ -262,7 +262,7 @@ export async function getProgressTabData(courseId, targetUserId) {
 }
 
 export async function getProctoringInfoData(courseId, username) {
-  let url = `${getConfig().LMS_BASE_URL}/api/edx_proctoring/v1/user_onboarding/status?course_id=${encodeURIComponent(courseId)}`;
+  let url = `${getConfig().LMS_BASE_URL}/api/edx_proctoring/v1/user_onboarding/status?is_learning_mfe=true&course_id=${encodeURIComponent(courseId)}`;
   if (username) {
     url += `&username=${encodeURIComponent(username)}`;
   }
diff --git a/src/course-home/outline-tab/OutlineTab.test.jsx b/src/course-home/outline-tab/OutlineTab.test.jsx
index 164322f..f5c75f6 100644
--- a/src/course-home/outline-tab/OutlineTab.test.jsx
+++ b/src/course-home/outline-tab/OutlineTab.test.jsx
@@ -29,7 +29,7 @@ describe('Outline Tab', () => {
   const enrollmentUrl = `${getConfig().LMS_BASE_URL}/api/enrollment/v1/enrollment`;
   const goalUrl = `${getConfig().LMS_BASE_URL}/api/course_home/v1/save_course_goal`;
   const outlineUrl = `${getConfig().LMS_BASE_URL}/api/course_home/v1/outline/${courseId}`;
-  const proctoringInfoUrl = `${getConfig().LMS_BASE_URL}/api/edx_proctoring/v1/user_onboarding/status?course_id=${encodeURIComponent(courseId)}`;
+  const proctoringInfoUrl = `${getConfig().LMS_BASE_URL}/api/edx_proctoring/v1/user_onboarding/status?is_learning_mfe=true&course_id=${encodeURIComponent(courseId)}`;
 
   const store = initializeStore();
   const defaultMetadata = Factory.build('courseHomeMetadata', { id: courseId });
diff --git a/src/course-home/outline-tab/widgets/ProctoringInfoPanel.jsx b/src/course-home/outline-tab/widgets/ProctoringInfoPanel.jsx
index 458f2a3..acde48d 100644
--- a/src/course-home/outline-tab/widgets/ProctoringInfoPanel.jsx
+++ b/src/course-home/outline-tab/widgets/ProctoringInfoPanel.jsx
@@ -2,7 +2,6 @@ import React, { useState, useEffect } from 'react';
 import camelCase from 'lodash.camelcase';
 import PropTypes from 'prop-types';
 
-import { getConfig } from '@edx/frontend-platform';
 import { injectIntl, intlShape } from '@edx/frontend-platform/i18n';
 import { Button } from '@edx/paragon';
 
@@ -131,7 +130,7 @@ function ProctoringInfoPanel({ courseId, username, intl }) {
             {isNotYetSubmitted(status) && (
               <>
                 {!isNotYetReleased(releaseDate) && (
-                  <Button variant="primary" block href={`${getConfig().LMS_BASE_URL}${link}`}>
+                  <Button variant="primary" block href={link}>
                     {readableStatus === readableStatuses.otherCourseApproved && (
                       <>
                         {intl.formatMessage(messages.proctoringOnboardingPracticeButton)}
-- 
2.34.1

