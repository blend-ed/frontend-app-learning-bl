From 743621ff517636fad720b80a671abd0fd2474b94 Mon Sep 17 00:00:00 2001
From: Carla Duarte <cduarte@edx.org>
Date: Tue, 15 Dec 2020 12:06:53 -0500
Subject: [PATCH 0338/1021] Dates tab badge fix (#310)

---
 src/course-home/dates-tab/Badge.jsx         |  2 +-
 src/course-home/dates-tab/Badge.scss        |  3 ++-
 src/course-home/dates-tab/DatesTab.test.jsx | 12 ++++++------
 src/course-home/dates-tab/badgelist.jsx     |  6 ++++--
 src/course-home/dates-tab/messages.js       | 10 +++++-----
 5 files changed, 18 insertions(+), 15 deletions(-)

diff --git a/src/course-home/dates-tab/Badge.jsx b/src/course-home/dates-tab/Badge.jsx
index fdf84c0..c4f9304 100644
--- a/src/course-home/dates-tab/Badge.jsx
+++ b/src/course-home/dates-tab/Badge.jsx
@@ -5,7 +5,7 @@ import classNames from 'classnames';
 export default function Badge({ children, className }) {
   return (
     <span
-      className={classNames('dates-badge badge align-text-bottom font-italic ml-2 px-2 py-1', className)}
+      className={classNames('dates-badge small ml-2', className)}
       data-testid="dates-badge"
     >
       {children}
diff --git a/src/course-home/dates-tab/Badge.scss b/src/course-home/dates-tab/Badge.scss
index c5e52b8..f4368cf 100644
--- a/src/course-home/dates-tab/Badge.scss
+++ b/src/course-home/dates-tab/Badge.scss
@@ -1,3 +1,4 @@
 .dates-badge {
-  font-size: 0.75rem;
+  border-radius: 4px;
+  padding: 2px 8px 3px 8px;
 }
diff --git a/src/course-home/dates-tab/DatesTab.test.jsx b/src/course-home/dates-tab/DatesTab.test.jsx
index d385143..ff6d733 100644
--- a/src/course-home/dates-tab/DatesTab.test.jsx
+++ b/src/course-home/dates-tab/DatesTab.test.jsx
@@ -76,21 +76,21 @@ describe('DatesTab', () => {
       const badges = within(header).getAllByTestId('dates-badge');
       expect(badges).toHaveLength(2);
       expect(badges[0]).toHaveTextContent('Completed');
-      expect(badges[1]).toHaveTextContent('Not Yet Released');
+      expect(badges[1]).toHaveTextContent('Not yet released');
     });
 
     it('handles unreleased & past due', async () => {
       const { header } = await getDay('Mon, May 4, 2020');
       const badges = within(header).getAllByTestId('dates-badge');
       expect(badges).toHaveLength(2);
-      expect(badges[0]).toHaveTextContent('Past Due');
-      expect(badges[1]).toHaveTextContent('Not Yet Released');
+      expect(badges[0]).toHaveTextContent('Past due');
+      expect(badges[1]).toHaveTextContent('Not yet released');
     });
 
     it('handles verified only', async () => {
       const { day } = await getDay('Sun, Aug 18, 2030');
       const badge = within(day).getByTestId('dates-badge');
-      expect(badge).toHaveTextContent('Verified Only');
+      expect(badge).toHaveTextContent('Verified only');
     });
 
     it('verified only has no link', async () => {
@@ -101,7 +101,7 @@ describe('DatesTab', () => {
     it('same status items have header badge', async () => {
       const { day, header } = await getDay('Tue, May 26, 2020');
       const badge = within(header).getByTestId('dates-badge');
-      expect(badge).toHaveTextContent('Past Due'); // one header badge
+      expect(badge).toHaveTextContent('Past due'); // one header badge
       expect(within(day).getAllByTestId('dates-badge')).toHaveLength(1); // no other badges
     });
 
@@ -111,7 +111,7 @@ describe('DatesTab', () => {
       expect(headerBadges).toHaveLength(0); // no header badges
       expect(items).toHaveLength(2);
       expect(within(items[0]).getByTestId('dates-badge')).toHaveTextContent('Completed');
-      expect(within(items[1]).getByTestId('dates-badge')).toHaveTextContent('Past Due');
+      expect(within(items[1]).getByTestId('dates-badge')).toHaveTextContent('Past due');
     });
 
     it('shows extra info', async () => {
diff --git a/src/course-home/dates-tab/badgelist.jsx b/src/course-home/dates-tab/badgelist.jsx
index 2f8fe5d..df819a0 100644
--- a/src/course-home/dates-tab/badgelist.jsx
+++ b/src/course-home/dates-tab/badgelist.jsx
@@ -37,13 +37,15 @@ function getBadgeListAndColor(date, intl, item, items) {
     {
       message: messages.today,
       shownForDay: isToday,
-      bg: 'dates-bg-today',
+      bg: 'bg-warning-300',
+      className: 'text-gray-900',
     },
     {
       message: messages.completed,
       shownForDay: assignments.length && assignments.every(isComplete),
       shownForItem: x => isLearnerAssignment(x) && isComplete(x),
       bg: 'bg-dark-100',
+      className: 'text-gray-900',
     },
     {
       message: messages.pastDue,
@@ -63,7 +65,7 @@ function getBadgeListAndColor(date, intl, item, items) {
       message: messages.unreleased,
       shownForDay: assignments.length && assignments.every(isUnreleased),
       shownForItem: x => isLearnerAssignment(x) && isUnreleased(x),
-      className: 'border border-dark-200 text-gray-500 align-top',
+      className: 'border border-gray-500 text-gray-500',
     },
     {
       message: messages.verifiedOnly,
diff --git a/src/course-home/dates-tab/messages.js b/src/course-home/dates-tab/messages.js
index 65675ac..87bc5ea 100644
--- a/src/course-home/dates-tab/messages.js
+++ b/src/course-home/dates-tab/messages.js
@@ -7,15 +7,15 @@ const messages = defineMessages({
   },
   dueNext: {
     id: 'learning.dates.badge.dueNext',
-    defaultMessage: 'Due Next',
+    defaultMessage: 'Due next',
   },
   pastDue: {
     id: 'learning.dates.badge.pastDue',
-    defaultMessage: 'Past Due',
+    defaultMessage: 'Past due',
   },
   title: {
     id: 'learning.dates.title',
-    defaultMessage: 'Important Dates',
+    defaultMessage: 'Important dates',
   },
   today: {
     id: 'learning.dates.badge.today',
@@ -23,11 +23,11 @@ const messages = defineMessages({
   },
   unreleased: {
     id: 'learning.dates.badge.unreleased',
-    defaultMessage: 'Not Yet Released',
+    defaultMessage: 'Not yet released',
   },
   verifiedOnly: {
     id: 'learning.dates.badge.verifiedOnly',
-    defaultMessage: 'Verified Only',
+    defaultMessage: 'Verified only',
   },
 });
 
-- 
2.34.1

